#!/bin/sh

# Syntax bin/compile <build-dir> <cache-dir>

BUILD_DIR=$1
CACHE_DIR=$2

# TODO: avoid hardcoding 'public' dir name; adjust for different app types.
PUBLIC_DIR=$BUILD_DIR/public

BUILDINFO_FILE="$PUBLIC_DIR/build-info.json"

echo "=====> Writing out build info to ${BUILDINFO_FILE}"
echo "{ \
\"sha\" : \"${SOURCE_VERSION}\",\
\"repo_url\" : \"${REPO_URL}/commits/${SOURCE_VERSION}\"\
}" > ${BUILDINFO_FILE}
